<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Distinction Virtual Campus Tour</title>

<script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
<script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>

<script>
AFRAME.registerComponent('toggle-panel', {
  schema: {target: {type: 'selector'}},
  init: function () {
    this.el.addEventListener('click', () => {
      const v = this.data.target.getAttribute('visible');
      this.data.target.setAttribute('visible', !v);
    });
  }
});
</script>

</head>

<body>

<a-scene
  renderer="antialias: true"
  vr-mode-ui="enabled: true">

<!-- ===================== -->
<!-- Assets -->
<!-- ===================== -->

<a-assets>
  <img id="blockA" src="assets/blockA.png">
  <img id="blockB" src="assets/blockB.webp">
  <img id="blockC" src="assets/blockC.webp">
  <audio id="narration" src="assets/narration.mp3"></audio>
</a-assets>

<!-- Environment -->
<a-entity environment="preset: school; dressingAmount: 15"></a-entity>

<!-- Lighting -->
<a-entity light="type: ambient; intensity: 0.6"></a-entity>
<a-entity light="type: directional; intensity: 1.1" position="5 8 4"></a-entity>

<!-- ===================== -->
<!-- Player Rig -->
<!-- ===================== -->

<a-entity id="rig" position="0 1.6 18">
  <a-camera wasd-controls look-controls>
    <a-cursor fuse="true" fuse-timeout="600"></a-cursor>
  </a-camera>

  <!-- VR Controllers -->
  <a-entity laser-controls="hand: left"></a-entity>
  <a-entity laser-controls="hand: right"></a-entity>
</a-entity>

<!-- Ground -->
<a-plane rotation="-90 0 0" width="120" height="120" color="#c8e6c9"></a-plane>

<!-- ===================================================== -->
<!-- BLOCK C — FRONT MAIN BUILDING -->
<!-- ===================================================== -->

<a-box position="0 5 -12" width="18" height="10" depth="1"
       material="src:#blockC"></a-box>

<a-text value="BLOCK C"
        position="0 11 -12"
        align="center"
        width="14"
        color="black"></a-text>

<!-- Entrance Door (animated) -->
<a-box id="doorC"
       position="0 2 -11.4"
       width="2"
       height="3"
       depth="0.2"
       color="#5d4037"
       animation__open="property: rotation; to: 0 90 0; startEvents: click; dur: 700">
</a-box>

<!-- Interior Room -->
<a-box position="0 2 -6" width="10" height="4" depth="8"
       color="#eeeeee"></a-box>

<a-text value="Reception & Admin"
        position="0 3.8 -3"
        align="center"
        color="black"></a-text>

<!-- Info Panel -->
<a-plane id="panelC"
         position="0 4 -8"
         width="6"
         height="2.5"
         color="#ffffff"
         visible="false">
  <a-text value="Block C:\nAdmin Offices\nMain Classrooms"
          align="center"
          color="black"
          width="5"></a-text>
</a-plane>

<a-sphere position="3 2 -9"
          radius="0.35"
          color="red"
          toggle-panel="target:#panelC"
          sound="src:#narration; on: click">
</a-sphere>

<!-- ===================================================== -->
<!-- BLOCK A — LIBRARY -->
<!-- ===================================================== -->

<a-box position="-22 5 -8" width="14" height="10" depth="1"
       material="src:#blockA"></a-box>

<a-text value="BLOCK A"
        position="-22 11 -8"
        align="center"
        width="14"
        color="black"></a-text>

<!-- Library Interior -->
<a-box position="-22 2 -3" width="10" height="4" depth="8"
       color="#f5f5f5"></a-box>

<!-- Shelves -->
<a-box position="-25 1.5 -3" width="1" height="3" depth="6" color="#8d6e63"></a-box>
<a-box position="-19 1.5 -3" width="1" height="3" depth="6" color="#8d6e63"></a-box>

<a-text value="Digital Library"
        position="-22 3.7 0"
        align="center"
        color="black"></a-text>

<a-plane id="panelA"
         position="-22 4 -6"
         width="6"
         height="2.5"
         color="#fff"
         visible="false">
  <a-text value="Library:\nBooks\nReading Hall\nE-Resources"
          align="center"
          color="black"
          width="5"></a-text>
</a-plane>

<a-sphere position="-22 2 -6"
          radius="0.35"
          color="blue"
          toggle-panel="target:#panelA">
</a-sphere>

<!-- ===================================================== -->
<!-- BLOCK B — LAB -->
<!-- ===================================================== -->

<a-box position="22 5 -8" width="14" height="10" depth="1"
       material="src:#blockB"></a-box>

<a-text value="BLOCK B"
        position="22 11 -8"
        align="center"
        width="14"
        color="black"></a-text>

<!-- Lab Interior -->
<a-box position="22 2 -3" width="10" height="4" depth="8"
       color="#e3f2fd"></a-box>

<!-- Lab Tables -->
<a-box position="20 1 -3" width="3" height="1" depth="2" color="#78909c"></a-box>
<a-box position="24 1 -3" width="3" height="1" depth="2" color="#78909c"></a-box>

<a-cylinder position="20 2 -3" radius="0.3" height="1" color="#00acc1"></a-cylinder>

<a-plane id="panelB"
         position="22 4 -6"
         width="6"
         height="2.5"
         color="#fff"
         visible="false">
  <a-text value="Laboratories:\nComputer Lab\nElectronics Lab"
          align="center"
          color="black"
          width="5"></a-text>
</a-plane>

<a-sphere position="22 2 -6"
          radius="0.35"
          color="green"
          toggle-panel="target:#panelB">
</a-sphere>

<!-- ===================================================== -->
<!-- TELEPORT SYSTEM -->
<!-- ===================================================== -->

<a-cylinder position="0 0.1 6" radius="1" height="0.2" color="yellow"
 onclick="rig.setAttribute('position','0 1.6 4')"></a-cylinder>

<a-cylinder position="-22 0.1 6" radius="1" height="0.2" color="yellow"
 onclick="rig.setAttribute('position','-22 1.6 4')"></a-cylinder>

<a-cylinder position="22 0.1 6" radius="1" height="0.2" color="yellow"
 onclick="rig.setAttribute('position','22 1.6 4')"></a-cylinder>

<a-text value="Teleport Pads — Click to Jump"
        position="0 1.5 7"
        align="center"
        width="10"
        color="black"></a-text>

<!-- Direction Signs -->
<a-text value="← Library"
        position="-10 2 2"
        rotation="0 30 0"
        color="black"></a-text>

<a-text value="Labs →"
        position="10 2 2"
        rotation="0 -30 0"
        color="black"></a-text>

</a-scene>
</body>
</html>
